{"ast":null,"code":"//servicio, traer la api\nconst BASE_URL = \"https://dummyjson.com/products\";\nfunction generarId() {\n  return Date.now() + Math.floor(Math.random() * 1000);\n}\n\n//get\nexport async function obtenerProductos() {\n  try {\n    const resp = await fetch(BASE_URL);\n    if (!resp.ok) throw new Error(`Error al obtener productos: ${resp.status} ${resp.statusText}`);\n    const data = await resp.json();\n    // Asegurar que cada producto tenga un id\n    return (data.products || []).map(p => p.id ? p : {\n      ...p,\n      id: generarId()\n    });\n  } catch (err) {\n    // re-lanzar para que la UI lo capture\n    throw err;\n  }\n}\n\n//post\nexport async function crearProductos(producto) {\n  try {\n    const resp = await fetch(`${BASE_URL}/add`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(producto)\n    });\n    if (!resp.ok) throw new Error(`Error al crear producto: ${resp.status} ${resp.statusText}`);\n    const created = await resp.json();\n    // Si la API no devuelve id, asignar uno aquí\n    if (!created.id) created.id = generarId();\n    return created;\n  } catch (err) {\n    throw err;\n  }\n}\n\n// Obtener un producto por su id\nexport async function obtenerProductoPorId(id) {\n  if (!id) throw new Error(\"Se requiere un id para obtener el producto\");\n  try {\n    const resp = await fetch(`${BASE_URL}/${id}`);\n    if (!resp.ok) throw new Error(\"Error al obtener producto: \" + resp.statusText);\n    const prod = await resp.json();\n    if (!prod.id) prod.id = id || generarId();\n    return prod;\n  } catch (err) {\n    throw err;\n  }\n}\n\n// Reemplaza/ajusta la función de actualización para permitir ediciones parciales (PATCH)\nexport async function actualizarProducto(id, producto) {\n  if (!id) throw new Error(\"Se requiere un id para actualizar el producto\");\n  try {\n    const resp = await fetch(`${BASE_URL}/${id}`, {\n      method: \"PATCH\",\n      // PATCH para cambios parciales; usa PUT si quieres reemplazo completo\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(producto)\n    });\n    if (!resp.ok) throw new Error(\"Error al actualizar producto: \" + resp.statusText);\n    const updated = await resp.json();\n    // Asegurar id en la respuesta\n    if (!updated.id) updated.id = id;\n    return updated;\n  } catch (err) {\n    throw err;\n  }\n}\nexport async function eliminarProducto(id) {\n  try {\n    const resp = await fetch(`${BASE_URL}/${id}`, {\n      method: \"DELETE\"\n    });\n    if (!resp.ok) throw new Error(\"Error al eliminar producto: \" + resp.statusText);\n    const result = await resp.json();\n    // si la API no devuelve detalle, devolver objeto con id para que la UI lo use\n    return result && (result.id || result.deleted) ? result : {\n      id\n    };\n  } catch (err) {\n    throw err;\n  }\n}\nexport const crearProducto = crearProductos;","map":{"version":3,"names":["BASE_URL","generarId","Date","now","Math","floor","random","obtenerProductos","resp","fetch","ok","Error","status","statusText","data","json","products","map","p","id","err","crearProductos","producto","method","headers","body","JSON","stringify","created","obtenerProductoPorId","prod","actualizarProducto","updated","eliminarProducto","result","deleted","crearProducto"],"sources":["C:/Users/nandi/Proyecto-Desarrollo-Web-Avanzada/Api+frontend/proyecto002/src/services/productService.js"],"sourcesContent":["//servicio, traer la api\r\nconst BASE_URL = \"https://dummyjson.com/products\"\r\n\r\nfunction generarId() {\r\n\treturn Date.now() + Math.floor(Math.random() * 1000);\r\n}\r\n\r\n//get\r\nexport async function obtenerProductos(){\r\n\ttry {\r\n\t\tconst resp = await fetch(BASE_URL);\r\n\t\tif (!resp.ok) throw new Error(`Error al obtener productos: ${resp.status} ${resp.statusText}`);\r\n\t\tconst data = await resp.json();\r\n\t\t// Asegurar que cada producto tenga un id\r\n\t\treturn (data.products || []).map(p => (p.id ? p : { ...p, id: generarId() }));\r\n\t} catch (err) {\r\n\t\t// re-lanzar para que la UI lo capture\r\n\t\tthrow err;\r\n\t}\r\n}\r\n\r\n//post\r\nexport async function crearProductos(producto){\r\n\ttry {\r\n\t\tconst resp = await fetch(`${BASE_URL}/add`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\"content-type\": \"application/json\"},\r\n\t\t\tbody: JSON.stringify(producto)\r\n\t\t});\r\n\t\tif (!resp.ok) throw new Error(`Error al crear producto: ${resp.status} ${resp.statusText}`);\r\n\t\tconst created = await resp.json();\r\n\t\t// Si la API no devuelve id, asignar uno aquí\r\n\t\tif (!created.id) created.id = generarId();\r\n\t\treturn created;\r\n\t} catch (err) {\r\n\t\tthrow err;\r\n\t}\r\n}\r\n\r\n// Obtener un producto por su id\r\nexport async function obtenerProductoPorId(id) {\r\n\tif (!id) throw new Error(\"Se requiere un id para obtener el producto\");\r\n\ttry {\r\n\t\tconst resp = await fetch(`${BASE_URL}/${id}`);\r\n\t\tif (!resp.ok) throw new Error(\"Error al obtener producto: \" + resp.statusText);\r\n\t\tconst prod = await resp.json();\r\n\t\tif (!prod.id) prod.id = id || generarId();\r\n\t\treturn prod;\r\n\t} catch (err) {\r\n\t\tthrow err;\r\n\t}\r\n}\r\n\r\n// Reemplaza/ajusta la función de actualización para permitir ediciones parciales (PATCH)\r\nexport async function actualizarProducto(id, producto) {\r\n\tif (!id) throw new Error(\"Se requiere un id para actualizar el producto\");\r\n\ttry {\r\n\t\tconst resp = await fetch(`${BASE_URL}/${id}`, {\r\n\t\t\tmethod: \"PATCH\", // PATCH para cambios parciales; usa PUT si quieres reemplazo completo\r\n\t\t\theaders: { \"content-type\": \"application/json\" },\r\n\t\t\tbody: JSON.stringify(producto),\r\n\t\t});\r\n\t\tif (!resp.ok) throw new Error(\"Error al actualizar producto: \" + resp.statusText);\r\n\t\tconst updated = await resp.json();\r\n\t\t// Asegurar id en la respuesta\r\n\t\tif (!updated.id) updated.id = id;\r\n\t\treturn updated;\r\n\t} catch (err) {\r\n\t\tthrow err;\r\n\t}\r\n}\r\n\r\nexport async function eliminarProducto(id) {\r\n\ttry {\r\n\t\tconst resp = await fetch(`${BASE_URL}/${id}`, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t});\r\n\t\tif (!resp.ok) throw new Error(\"Error al eliminar producto: \" + resp.statusText);\r\n\t\tconst result = await resp.json();\r\n\t\t// si la API no devuelve detalle, devolver objeto con id para que la UI lo use\r\n\t\treturn result && (result.id || result.deleted) ? result : { id };\r\n\t} catch (err) {\r\n\t\tthrow err;\r\n\t}\r\n}\r\n\r\n\r\nexport const crearProducto = crearProductos;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}