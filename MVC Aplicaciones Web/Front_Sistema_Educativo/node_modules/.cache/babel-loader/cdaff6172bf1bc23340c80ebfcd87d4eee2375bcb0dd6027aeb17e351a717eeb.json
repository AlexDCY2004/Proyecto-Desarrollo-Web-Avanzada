{"ast":null,"code":"import axios from 'axios';\nimport { obtenerToken, logout } from './authService';\nconst baseURL = process.env.REACT_APP_API_URL || 'http://localhost:3000';\nconst apiClient = axios.create({\n  baseURL\n});\n\n// Interceptor para agregar el token a las peticiones\napiClient.interceptors.request.use(config => {\n  const token = obtenerToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Interceptor para manejar errores de autenticación\napiClient.interceptors.response.use(res => res, err => {\n  var _err$response, _err$response2, _err$response2$data, _err$response3, _err$response3$data;\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n    logout();\n    window.location.href = '/login';\n  }\n  const message = (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || (err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.mensaje) || err.message;\n  return Promise.reject(new Error(message));\n});\nexport default apiClient;","map":{"version":3,"names":["axios","obtenerToken","logout","baseURL","process","env","REACT_APP_API_URL","apiClient","create","interceptors","request","use","config","token","headers","Authorization","response","res","err","_err$response","_err$response2","_err$response2$data","_err$response3","_err$response3$data","status","window","location","href","message","data","error","mensaje","Promise","reject","Error"],"sources":["C:/Users/nandi/Downloads/Sistema de calificaciones/Sistema de calificaciones/MVC Aplicaciones Web/Front_Sistema_Educativo/src/services/apiClient.js"],"sourcesContent":["import axios from 'axios';\nimport { obtenerToken, logout } from './authService';\n\nconst baseURL = process.env.REACT_APP_API_URL || 'http://localhost:3000';\n\nconst apiClient = axios.create({\n  baseURL,\n});\n\n// Interceptor para agregar el token a las peticiones\napiClient.interceptors.request.use((config) => {\n  const token = obtenerToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Interceptor para manejar errores de autenticación\napiClient.interceptors.response.use(\n  (res) => res,\n  (err) => {\n    if (err.response?.status === 401) {\n      logout();\n      window.location.href = '/login';\n    }\n    const message = err?.response?.data?.error || err?.response?.data?.mensaje || err.message;\n    return Promise.reject(new Error(message));\n  }\n);\n\nexport default apiClient;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,EAAEC,MAAM,QAAQ,eAAe;AAEpD,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAExE,MAAMC,SAAS,GAAGP,KAAK,CAACQ,MAAM,CAAC;EAC7BL;AACF,CAAC,CAAC;;AAEF;AACAI,SAAS,CAACE,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EAC7C,MAAMC,KAAK,GAAGZ,YAAY,CAAC,CAAC;EAC5B,IAAIY,KAAK,EAAE;IACTD,MAAM,CAACE,OAAO,CAACC,aAAa,GAAG,UAAUF,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,CAAC;;AAEF;AACAL,SAAS,CAACE,YAAY,CAACO,QAAQ,CAACL,GAAG,CAChCM,GAAG,IAAKA,GAAG,EACXC,GAAG,IAAK;EAAA,IAAAC,aAAA,EAAAC,cAAA,EAAAC,mBAAA,EAAAC,cAAA,EAAAC,mBAAA;EACP,IAAI,EAAAJ,aAAA,GAAAD,GAAG,CAACF,QAAQ,cAAAG,aAAA,uBAAZA,aAAA,CAAcK,MAAM,MAAK,GAAG,EAAE;IAChCtB,MAAM,CAAC,CAAC;IACRuB,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC;EACA,MAAMC,OAAO,GAAG,CAAAV,GAAG,aAAHA,GAAG,wBAAAE,cAAA,GAAHF,GAAG,CAAEF,QAAQ,cAAAI,cAAA,wBAAAC,mBAAA,GAAbD,cAAA,CAAeS,IAAI,cAAAR,mBAAA,uBAAnBA,mBAAA,CAAqBS,KAAK,MAAIZ,GAAG,aAAHA,GAAG,wBAAAI,cAAA,GAAHJ,GAAG,CAAEF,QAAQ,cAAAM,cAAA,wBAAAC,mBAAA,GAAbD,cAAA,CAAeO,IAAI,cAAAN,mBAAA,uBAAnBA,mBAAA,CAAqBQ,OAAO,KAAIb,GAAG,CAACU,OAAO;EACzF,OAAOI,OAAO,CAACC,MAAM,CAAC,IAAIC,KAAK,CAACN,OAAO,CAAC,CAAC;AAC3C,CACF,CAAC;AAED,eAAerB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}